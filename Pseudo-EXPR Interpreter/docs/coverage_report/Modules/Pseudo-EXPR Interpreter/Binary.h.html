<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
        <meta charset="utf-8"/>
	    <title>Binary.h</title>
	    <link href="../../third-party/google-code-prettify/prettify-CppCoverage.css" type="text/css" rel="stylesheet" />
	    <script type="text/javascript" src="../../third-party/google-code-prettify/prettify.js"></script>
	</head>
    <body onload="prettyPrint()">
        <h4></h4>
        <pre class="prettyprint lang-cpp linenums">
#ifndef BINARY_H

#define BINARY_H

#include "Expression.h"

/// Handles binary expressions
class Binary : public Expression
{
public:
	/// Binary Constructor
	///
	/// Handles all of the supported binary
	/// expressions of the language
	/// @param left The left expression
	/// @param op The operator used for binary evaluation
	/// @param right the right expression 
	Binary(Expression* left, const Token&amp; op, Expression* right)
<span style = "background-color:#dfd">		: m_Left(left), m_Operator(op), m_Right(right)
	{}</span>

	// Deletes the left and right expression
	~Binary()
<span style = "background-color:#dfd">	{
		delete m_Left;
		delete m_Right;
	}</span>

	/// Evaluates the binary expression
	///
	/// It evaluates the expression by 
	/// evaluating the left and right side
	/// and then based on the operator does
	/// the evaluation.
	/// @param The Environment in which it will be evaluated
	/// @returns The evaluation's result
	/// @throws RunTimeError if subtraction causes the result
	/// to be negative
	/// @throws RunTimeError if trying to divide by zero
	/// @throws RunTimeError if the token is invalid
	BigInteger evaluate(Environment* env) const override
<span style = "background-color:#dfd">	{
		BigInteger left = m_Left-&gt;evaluate(env);
		BigInteger right = m_Right-&gt;evaluate(env);</span>

<span style = "background-color:#dfd">		TokenType type = m_Operator.getType();</span>

<span style = "background-color:#dfd">		switch (type)</span>
		{
		// ---------- Artithmetic ---------- 

<span style = "background-color:#dfd">		case TokenType::PLUS: return left + right;
		case TokenType::PROD: return left * right;</span>

		case TokenType::MINUS:
<span style = "background-color:#dfd">			if (left &lt; right) throw RunTimeError("Usage of negative numbers", currLine());
			return left - right;</span>

		case TokenType::DIV:
<span style = "background-color:#dfd">			if (right == 0) throw RunTimeError("Division by zero", currLine());
			return left / right;</span>

		case TokenType::MOD:
<span style = "background-color:#dfd">			if (right == 0) throw RunTimeError("Division by zero", currLine());
			return left % right;</span>

		// ---------- Comparison ----------

<span style = "background-color:#dfd">		case TokenType::LESS_THAN: return left &lt; right;
		case TokenType::GREATER_THAN: return left &gt; right;
		case TokenType::LESS_EQUAL: return left &lt;= right;
		case TokenType::GREATER_EQUAL: return left &gt;= right;</span>

		// ---------- Equality ----------

<span style = "background-color:#dfd">		case TokenType::EQUAL_EQUAL: return left == right;
		case TokenType::NOT_EQUAL: return left != right;</span>

		// ---------- Logical ----------

<span style = "background-color:#dfd">		case TokenType::AND: return left &amp;&amp; right;
		case TokenType::OR: return left || right;</span>

<span style = "background-color:#dfd">		default: throw RunTimeError("Unexpected behavior", currLine());</span>
		}
<span style = "background-color:#fdd">	}</span>

private:
	/// The left expression
	Expression* m_Left;
	/// The operator token
	Token m_Operator;
	/// The right expression
	Expression* m_Right;

	/// @returns the line that the operator
	/// token is located at
	uint64_t currLine() const
<span style = "background-color:#dfd">	{
		return m_Operator.getLine();
	}</span>
};

#endif // !BINARY_H</pre>
        <hr />
        <table width="100%">
            <thead>
                <tr>
                    <th align="center">
                        <small>Generated by</small>
                        <a href="https://github.com/OpenCppCoverage/OpenCppCoverage/releases">
                            <strong>OpenCppCoverage (Version: 0.9.9.0)</strong>
                        </a>
                    </th>
                </tr>
            </thead>
        </table>
    </body>
</html>