<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
        <meta charset="utf-8"/>
	    <title>Environmnet.cpp</title>
	    <link href="../../third-party/google-code-prettify/prettify-CppCoverage.css" type="text/css" rel="stylesheet" />
	    <script type="text/javascript" src="../../third-party/google-code-prettify/prettify.js"></script>
	</head>
    <body onload="prettyPrint()">
        <h4></h4>
        <pre class="prettyprint lang-cpp linenums">
#include "Environmnet.h"

#include "../Utility/Helper.h"
#include "../Parser/Expressions/Expression.h"

Environment::Environment()
<span style = "background-color:#dfd">    : m_PrevEnv(nullptr)
{}</span>

Environment::Environment(Environment* prevEnv)
<span style = "background-color:#dfd">    : m_PrevEnv(prevEnv)
{}</span>

Environment::~Environment()
<span style = "background-color:#dfd">{
    for (std::pair&lt;std::string, Expression*&gt; entry : m_Table)</span>
    {
<span style = "background-color:#dfd">        delete entry.second;
    }
}</span>

void Environment::set(const std::string&amp; key, Expression* expr)
<span style = "background-color:#dfd">{   
    if (hasKey(key))</span>
    {
<span style = "background-color:#dfd">        delete m_Table[key];
        m_Table[key] = expr;
        return;</span>
    }

<span style = "background-color:#dfd">    if (!contains(key))</span>
    {
<span style = "background-color:#dfd">        m_Table[key] = expr;
        return;</span>
    }

<span style = "background-color:#dfd">    if (m_PrevEnv)
        m_PrevEnv-&gt;set(key, expr);
}</span>

void Environment::setOnSelf(const std::string&amp; key, Expression* expr)
<span style = "background-color:#dfd">{
    if (hasKey(key))
        delete m_Table[key];</span>

<span style = "background-color:#dfd">    m_Table[key] = expr;
}</span>

bool Environment::contains(const std::string&amp; key) const 
<span style = "background-color:#dfd">{ 
    if (!hasKey(key))</span>
    {
<span style = "background-color:#dfd">        if (m_PrevEnv) 
            return m_PrevEnv-&gt;contains(key);</span>

<span style = "background-color:#dfd">        return false;</span>
    }

<span style = "background-color:#dfd">    return true;
}</span>
const Expression* Environment::get(const std::string&amp; key) const 
<span style = "background-color:#dfd">{ 
    if (!hasKey(key))</span>
    {
<span style = "background-color:#dfd">        if (m_PrevEnv)
            return m_PrevEnv-&gt;get(key);</span>
    }

<span style = "background-color:#dfd">    return m_Table.at(key); 
}</span>

bool Environment::hasKey(const std::string&amp; key) const
<span style = "background-color:#dfd">{
    return m_Table.find(key) != m_Table.end();
}</span></pre>
        <hr />
        <table width="100%">
            <thead>
                <tr>
                    <th align="center">
                        <small>Generated by</small>
                        <a href="https://github.com/OpenCppCoverage/OpenCppCoverage/releases">
                            <strong>OpenCppCoverage (Version: 0.9.9.0)</strong>
                        </a>
                    </th>
                </tr>
            </thead>
        </table>
    </body>
</html>